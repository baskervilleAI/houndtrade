__d(function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OhlcElement=e.OhlcController=e.CandlestickElement=e.CandlestickController=void 0;var t=r(d[0]),l=r(d[1]);function inRange(t,l,n,o){const s=null===l,i=null===n,c=!(!t||s&&i)&&
/*!
   * @license
   * chartjs-chart-financial
   * http://chartjs.org/
   * Version: 0.2.1
   *
   * Copyright 2024 Chart.js Contributors
   * Released under the MIT license
   * https://github.com/chartjs/chartjs-chart-financial/blob/master/LICENSE.md
   */
function getBarBounds(t,l){const{x:n,y:o,base:s,width:i,height:c}=t.getProps(["x","low","high","width","height"],l);let u,h,p,b,f;return t.horizontal?(f=c/2,u=Math.min(n,s),h=Math.max(n,s),p=o-f,b=o+f):(f=i/2,u=n-f,h=n+f,p=Math.min(o,s),b=Math.max(o,s)),{left:u,top:p,right:h,bottom:b}}(t,o);return c&&(s||l>=c.left&&l<=c.right)&&(i||n>=c.top&&n<=c.bottom)}class FinancialElement extends t.BarElement{static defaults={backgroundColors:{up:"rgba(75, 192, 192, 0.5)",down:"rgba(255, 99, 132, 0.5)",unchanged:"rgba(201, 203, 207, 0.5)"},borderColors:{up:"rgb(75, 192, 192)",down:"rgb(255, 99, 132)",unchanged:"rgb(201, 203, 207)"}};height(){return this.base-this.y}inRange(t,l,n){return inRange(this,t,l,n)}inXRange(t,l){return inRange(this,t,null,l)}inYRange(t,l){return inRange(this,null,t,l)}getRange(t){return"x"===t?this.width/2:this.height/2}getCenterPoint(t){const{x:l,low:n,high:o}=this.getProps(["x","low","high"],t);return{x:l,y:(o+n)/2}}tooltipPosition(t){const{x:l,open:n,close:o}=this.getProps(["x","open","close"],t);return{x:l,y:(n+o)/2}}}const n=t.Chart.defaults;class OhlcElement extends FinancialElement{static id="ohlc";static defaults=Object.assign({},FinancialElement.defaults,{lineWidth:2,armLength:null,armLengthRatio:.8});draw(t){const o=this,{x:s,open:i,high:c,low:u,close:h}=o,p=(0,l.valueOrDefault)(o.armLengthRatio,n.elements.ohlc.armLengthRatio);let b=(0,l.valueOrDefault)(o.armLength,n.elements.ohlc.armLength);null===b&&(b=o.width*p*.5),t.strokeStyle=h<i?(0,l.valueOrDefault)(o.options.borderColors?o.options.borderColors.up:void 0,n.elements.ohlc.borderColors.up):h>i?(0,l.valueOrDefault)(o.options.borderColors?o.options.borderColors.down:void 0,n.elements.ohlc.borderColors.down):(0,l.valueOrDefault)(o.options.borderColors?o.options.borderColors.unchanged:void 0,n.elements.ohlc.borderColors.unchanged),t.lineWidth=(0,l.valueOrDefault)(o.lineWidth,n.elements.ohlc.lineWidth),t.beginPath(),t.moveTo(s,c),t.lineTo(s,u),t.moveTo(s-b,i),t.lineTo(s,i),t.moveTo(s+b,h),t.lineTo(s,h),t.stroke()}}e.OhlcElement=OhlcElement;class FinancialController extends t.BarController{static overrides={label:"",parsing:!1,hover:{mode:"label"},animations:{numbers:{type:"number",properties:["x","y","base","width","open","high","low","close"]}},scales:{x:{type:"timeseries",offset:!0,ticks:{major:{enabled:!0},source:"data",maxRotation:0,autoSkip:!0,autoSkipPadding:75,sampleSize:100}},y:{type:"linear"}},plugins:{tooltip:{intersect:!1,mode:"index",callbacks:{label(n){const o=n.parsed;if(!(0,l.isNullOrUndef)(o.y))return t.defaults.plugins.tooltip.callbacks.label(n);const{o:s,h:i,l:c,c:u}=o;return`O: ${s}  H: ${i}  L: ${c}  C: ${u}`}}}}};getLabelAndValue(t){const l=this,n=l.getParsed(t),o=l._cachedMeta.iScale.axis,{o:s,h:i,l:c,c:u}=n,h=`O: ${s}  H: ${i}  L: ${c}  C: ${u}`;return{label:`${l._cachedMeta.iScale.getLabelForValue(n[o])}`,value:h}}getUserBounds(t){const{min:l,max:n,minDefined:o,maxDefined:s}=t.getUserBounds();return{min:o?l:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}getMinMax(t){const l=this._cachedMeta,n=l._parsed,o=l.iScale.axis,s=this._getOtherScale(t),{min:i,max:c}=this.getUserBounds(s);if(n.length<2)return{min:0,max:1};if(t===l.iScale)return{min:n[0][o],max:n[n.length-1][o]};const u=n.filter(({x:t})=>t>=i&&t<c);let h=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;for(let t=0;t<u.length;t++){const l=u[t];h=Math.min(h,l.l),p=Math.max(p,l.h)}return{min:h,max:p}}calculateElementProperties(t,l,n,o){const s=this,i=s._cachedMeta.vScale,c=i.getBasePixel(),u=s._calculateBarIndexPixels(t,l,o),h=s.chart.data.datasets[s.index].data[t],p=i.getPixelForValue(h.o),b=i.getPixelForValue(h.h),f=i.getPixelForValue(h.l),C=i.getPixelForValue(h.c);return{base:n?c:f,x:u.center,y:(f+b)/2,width:u.size,open:p,high:b,low:f,close:C}}draw(){const t=this,n=t.chart,o=t._cachedMeta.data;(0,l.clipArea)(n.ctx,n.chartArea);for(let l=0;l<o.length;++l)o[l].draw(t._ctx);(0,l.unclipArea)(n.ctx)}}class OhlcController extends FinancialController{static id="ohlc";static defaults=Object.assign({},FinancialController.defaults,{dataElementType:OhlcElement.id,datasets:{barPercentage:1,categoryPercentage:1}});updateElements(t,l,n,o){const s="reset"===o,i=this._getRuler(),{sharedOptions:c,includeOptions:u}=this._getSharedOptions(l,o);for(let h=l;h<l+n;h++){const l=c||this.resolveDataElementOptions(h,o),n=this.calculateElementProperties(h,i,s,l);u&&(n.options=l),this.updateElement(t[h],h,n,o)}}}e.OhlcController=OhlcController;class CandlestickElement extends FinancialElement{static id="candlestick";static defaults=Object.assign({},FinancialElement.defaults,{borderWidth:1});draw(n){const o=this,{x:s,open:i,high:c,low:u,close:h}=o;let p,b=o.options.borderColors;"string"==typeof b&&(b={up:b,down:b,unchanged:b}),h<i?(p=(0,l.valueOrDefault)(b?b.up:void 0,t.defaults.elements.candlestick.borderColors.up),n.fillStyle=(0,l.valueOrDefault)(o.options.backgroundColors?o.options.backgroundColors.up:void 0,t.defaults.elements.candlestick.backgroundColors.up)):h>i?(p=(0,l.valueOrDefault)(b?b.down:void 0,t.defaults.elements.candlestick.borderColors.down),n.fillStyle=(0,l.valueOrDefault)(o.options.backgroundColors?o.options.backgroundColors.down:void 0,t.defaults.elements.candlestick.backgroundColors.down)):(p=(0,l.valueOrDefault)(b?b.unchanged:void 0,t.defaults.elements.candlestick.borderColors.unchanged),n.fillStyle=(0,l.valueOrDefault)(o.backgroundColors?o.backgroundColors.unchanged:void 0,t.defaults.elements.candlestick.backgroundColors.unchanged)),n.lineWidth=(0,l.valueOrDefault)(o.options.borderWidth,t.defaults.elements.candlestick.borderWidth),n.strokeStyle=p,n.beginPath(),n.moveTo(s,c),n.lineTo(s,Math.min(i,h)),n.moveTo(s,u),n.lineTo(s,Math.max(i,h)),n.stroke(),n.fillRect(s-o.width/2,h,o.width,i-h),n.strokeRect(s-o.width/2,h,o.width,i-h),n.closePath()}}e.CandlestickElement=CandlestickElement;class CandlestickController extends FinancialController{static id="candlestick";static defaults=Object.assign({},FinancialController.defaults,{dataElementType:CandlestickElement.id});static defaultRoutes=t.BarController.defaultRoutes;updateElements(t,l,n,o){const s="reset"===o,i=this._getRuler(),{sharedOptions:c,includeOptions:u}=this._getSharedOptions(l,o);for(let h=l;h<l+n;h++){const l=c||this.resolveDataElementOptions(h,o),n=this.calculateElementProperties(h,i,s,l);u&&(n.options=l),this.updateElement(t[h],h,n,o)}}}e.CandlestickController=CandlestickController},540,[543,544]);